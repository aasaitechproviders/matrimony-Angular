<div class="profile-container">
  <h2>User Profile</h2>

  <!-- ðŸ”¹ Photo viewer -->
  <div class="photo-viewer" *ngIf="photoUrls.length > 0">
    <button class="arrow-btn" (click)="prevPhoto()">&#8592;</button>
    <img [src]="photoUrls[currentPhotoIndex]" alt="Profile Photo" class="clickable"
         (click)="openFullscreen(currentPhotoIndex)" />
    <button class="arrow-btn" (click)="nextPhoto()">&#8594;</button>
  </div>

  <!-- ðŸ”¹ Fullscreen photo viewer -->
  <div class="fullscreen-overlay" *ngIf="isFullscreen">
    <span class="close-btn" (click)="closeFullscreen()">&#10005;</span>
    <button class="arrow-btn left" (click)="prevPhoto()">&#8592;</button>
    <img [src]="photoUrls[currentPhotoIndex]" alt="Fullscreen Photo" class="fullscreen-img" />
    <button class="arrow-btn right" (click)="nextPhoto()">&#8594;</button>
  </div>

  <form (ngSubmit)="onSaveProfile()" #profileForm="ngForm">
    <!-- Basic -->
    <label>Full Name</label>
    <input type="text" [(ngModel)]="profile.fullName" name="fullName" required />

    <label>Email</label>
    <input type="email" [(ngModel)]="profile.email" name="email" />

    <label>Gender</label>
    <select [(ngModel)]="profile.gender" name="gender" required>
      <option value="">-- Select --</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
    </select>

    <label>Date of Birth</label>
    <input type="date" [(ngModel)]="profile.dob" name="dob" required />

    <label>Birth Time</label>
    <input type="time" [(ngModel)]="profile.birthTime" name="birthTime" />

    <label>Birth Place</label>
    <input type="text" [(ngModel)]="profile.birthPlace" name="birthPlace" />

    <!-- Astrology -->
    <label>Raasi</label>
    <select [(ngModel)]="profile.raasi" name="raasi">
      <option value="">-- Select --</option>
      <option *ngFor="let r of raasiList" [value]="r">{{ r }}</option>
    </select>

    <label>Natchathiram</label>
    <select [(ngModel)]="profile.natchathiram" name="natchathiram">
      <option value="">-- Select --</option>
      <option *ngFor="let n of natchathiramList" [value]="n">{{ n }}</option>
    </select>

    <label>Laknam</label>
    <select [(ngModel)]="profile.laknam" name="laknam">
      <option value="">-- Select --</option>
      <option *ngFor="let l of laknamList" [value]="l">{{ l }}</option>
    </select>

    <label>Blood Group</label>
    <select [(ngModel)]="profile.bloodGroup" name="bloodGroup">
      <option value="">-- Select --</option>
      <option *ngFor="let bg of bloodGroups" [value]="bg">{{ bg }}</option>
    </select>

    <!-- Cultural -->
    <label>Religion</label>
    <input type="text" [(ngModel)]="profile.religion" name="religion" />

    <label>Caste</label>
    <input type="text" [(ngModel)]="profile.caste" name="caste" />

    <label>Mother Tongue</label>
    <input type="text" [(ngModel)]="profile.motherTongue" name="motherTongue" />

    <label>Marital Status</label>
    <select [(ngModel)]="profile.maritalStatus" name="maritalStatus">
      <option value="">-- Select --</option>
      <option value="Single">Single</option>
      <option value="Divorced">Divorced</option>
      <option value="Widowed">Widowed</option>
    </select>

    <!-- Work -->
    <label>Employment Type</label>
    <select [(ngModel)]="profile.employmentType" name="employmentType">
      <option value="">-- Select --</option>
      <option value="Employed">Employed</option>
      <option value="Self-Employed">Self-Employed</option>
      <option value="Business">Business</option>
      <option value="Not Working">Not Working</option>
    </select>

    <label>Company Name</label>
    <input type="text" [(ngModel)]="profile.companyName" name="companyName" />

    <label>Company Address</label>
    <input type="text" [(ngModel)]="profile.companyAddress" name="companyAddress" />

    <label>Annual Income</label>
    <input type="number" [(ngModel)]="profile.income" name="income" />

    <!-- Physical -->
    <label>Height (cm)</label>
    <input type="number" [(ngModel)]="profile.height" name="height" />

    <label>Weight (kg)</label>
    <input type="number" [(ngModel)]="profile.weight" name="weight" />

    <label>Complexion</label>
    <select [(ngModel)]="profile.complexion" name="complexion">
      <option value="">-- Select --</option>
      <option value="Fair">Fair</option>
      <option value="Wheatish">Wheatish</option>
      <option value="Dark">Dark</option>
    </select>

    <label>Body Type</label>
    <select [(ngModel)]="profile.bodyType" name="bodyType">
      <option value="">-- Select --</option>
      <option value="Slim">Slim</option>
      <option value="Average">Average</option>
      <option value="Athletic">Athletic</option>
      <option value="Heavy">Heavy</option>
    </select>

    <!-- Family -->
    <label>Kulatheivam</label>
    <input type="text" [(ngModel)]="profile.kulatheivam" name="kulatheivam" />

    <label>Father's Name</label>
    <input type="text" [(ngModel)]="profile.fatherName" name="fatherName" />

    <label>Father's Occupation</label>
    <input type="text" [(ngModel)]="profile.fatherOccupation" name="fatherOccupation" />

    <label>Father's Contact</label>
    <input type="text" [(ngModel)]="profile.fatherContact" name="fatherContact" />

    <label>Father's Native Place</label>
    <input type="text" [(ngModel)]="profile.fatherNativePlace" name="fatherNativePlace" />

    <label>Mother's Name</label>
    <input type="text" [(ngModel)]="profile.motherName" name="motherName" />

    <label>Mother's Occupation</label>
    <input type="text" [(ngModel)]="profile.motherOccupation" name="motherOccupation" />

    <label>Mother's Contact</label>
    <input type="text" [(ngModel)]="profile.motherContact" name="motherContact" />

    <label>Mother's Native Place</label>
    <input type="text" [(ngModel)]="profile.motherNativePlace" name="motherNativePlace" />

    <label>Family Annual Income</label>
    <input type="number" [(ngModel)]="profile.familyAnnualIncome" name="familyAnnualIncome" />

    <!-- Siblings -->
    <label>Brother Details</label>
    <textarea [(ngModel)]="profile.brotherDetails" name="brotherDetails"></textarea>

    <label>Sister Details</label>
    <textarea [(ngModel)]="profile.sisterDetails" name="sisterDetails"></textarea>

    <!-- Hobbies -->
    <label>Hobbies</label>
    <input type="text" [(ngModel)]="profile.hobbies" name="hobbies" />

    <!-- Lifestyle -->
    <label>Diet</label>
    <select [(ngModel)]="profile.diet" name="diet">
      <option value="">-- Select --</option>
      <option value="Veg">Veg</option>
      <option value="Non-Veg">Non-Veg</option>
      <option value="Vegan">Vegan</option>
      <option value="Eggetarian">Eggetarian</option>
    </select>

    <label>Smoking</label>
    <select [(ngModel)]="profile.smoking" name="smoking">
      <option value="">-- Select --</option>
      <option value="No">No</option>
      <option value="Yes">Yes</option>
    </select>

    <label>Drinking</label>
    <select [(ngModel)]="profile.drinking" name="drinking">
      <option value="">-- Select --</option>
      <option value="No">No</option>
      <option value="Yes">Yes</option>
    </select>

    <!-- Address (added fields) -->
    <label>Address Line 1</label>
    <input type="text" [(ngModel)]="profile.addressLine1" name="addressLine1" />

    <label>Address Line 2</label>
    <input type="text" [(ngModel)]="profile.addressLine2" name="addressLine2" />

    <label>Country</label>
    <input type="text" [(ngModel)]="profile.country" name="country" />

    <label>State</label>
    <input type="text" [(ngModel)]="profile.state" name="state" />

    <label>City</label>
    <input type="text" [(ngModel)]="profile.city" name="city" />

    <label>Pincode</label>
    <input type="text" [(ngModel)]="profile.pincode" name="pincode" />

    <label>Profile Created Date</label>
    <input type="date" [value]="profile.createdDate | date:'yyyy-MM-dd'" disabled />

    <!-- Photos -->
    <label>Upload Photos</label>
    <input type="file" multiple (change)="onFileChange($event)" />

    <div class="photo-preview" *ngIf="selectedFiles.length > 0">
      <p>Selected Photos:</p>
      <div *ngFor="let file of selectedFiles">{{ file.name }}</div>
    </div>

    <!-- Buttons -->
    <button type="submit">Save Profile</button>
    <button type="button" (click)="onDeleteProfile()">Delete Profile</button>
  </form>
</div>
